<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: RdfHelper
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!RdfHelper.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (R)</a> &raquo;
    
    
    <span class="title">RdfHelper</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: RdfHelper
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/helpers/rdf_helper.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Manuel Dudda &lt;manueldudda@redpeppix.de&gt;</p>
</div>
      
    </li>
  
</ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="RDF_TTL_FILE-constant" class="">RDF_TTL_FILE =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>db</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>worldcup.ttl</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span></pre></dd>
      
        <dt id="QUERYABLE-constant" class="">QUERYABLE =
          
        </dt>
        <dd><pre class="code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Repository</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='const'>RDF_TTL_FILE</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="DBPEDIA-constant" class="">DBPEDIA =
          
        </dt>
        <dd><pre class="code"><span class='const'>SPARQL</span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://dbpedia.org/sparql</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_days-instance_method" title="#get_days (instance method)">- (Array&lt;Date&gt;) <strong>get_days</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all matchdays.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_goals-instance_method" title="#get_goals (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_goals</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all goals corresponding to a match by the given uri A group
contains - uri - label.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_group-instance_method" title="#get_group (instance method)">- (RDF::Query::Solution) <strong>get_group</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a group given by a specific uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_groups-instance_method" title="#get_groups (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_groups</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all groups.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_match-instance_method" title="#get_match (instance method)">- (RDF::Query::Solution) <strong>get_match</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a match given by a specific uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_matches-instance_method" title="#get_matches (instance method)">- (Array&lt;RDF::Query::Solution&gt;, String) <strong>get_matches</strong>(filter_uri = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all matches filtered by a specific filter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_multi_stage_competitions-instance_method" title="#get_multi_stage_competitions (instance method)">- (Object) <strong>get_multi_stage_competitions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_player-instance_method" title="#get_player (instance method)">- (RDF::Query::Solution) <strong>get_player</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a player given by the uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_player_team_stations-instance_method" title="#get_player_team_stations (instance method)">- (RDF::Query::Solution) <strong>get_player_team_stations</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all team stations (only clubs) with time period a player
participated in descendant order given by the uri of player.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_player_uri-instance_method" title="#get_player_uri (instance method)">- (String<sup>?</sup>) <strong>get_player_uri</strong>(name, team_uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>guess a player uri by a given name and the uri of the team.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_players_for_team-instance_method" title="#get_players_for_team (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_players_for_team</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all players of a team given by the uri A player contains - uri -
label - team_uri - team.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_rounds-instance_method" title="#get_rounds (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_rounds</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all rounds.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_stadium-instance_method" title="#get_stadium (instance method)">- (RDF::Query::Solution) <strong>get_stadium</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a stadium given by the uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_stadiums-instance_method" title="#get_stadiums (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_stadiums</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all stadiums.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_team-instance_method" title="#get_team (instance method)">- (RDF::Query::Solution) <strong>get_team</strong>(uri, lang_filter = true) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return a team given by a specific uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_team_uri-instance_method" title="#get_team_uri (instance method)">- (String) <strong>get_team_uri</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>guess a team uri by a given team name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_teams-instance_method" title="#get_teams (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_teams</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all teams.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_trainer-instance_method" title="#get_trainer (instance method)">- (RDF::Query::Solution) <strong>get_trainer</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a trainer given by the uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_trainer_team_stations-instance_method" title="#get_trainer_team_stations (instance method)">- (RDF::Query::Solution) <strong>get_trainer_team_stations</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all team stations (only clubs) with time period a trainer
participated in descendant order given by the uri of trainer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_trainer_uri-instance_method" title="#get_trainer_uri (instance method)">- (String<sup>?</sup>) <strong>get_trainer_uri</strong>(name, team_uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>guess a trainer uri by a given name and uri of the team.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#tmp_get_player-instance_method" title="#tmp_get_player (instance method)">- (Object) <strong>tmp_get_player</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_days-instance_method">
  
    - (<tt>Array&lt;Date&gt;</tt>) <strong>get_days</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all matchdays. Dates without matches are filtered. The days will be
ordered by ascending .</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Date&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the days</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_days'>get_days</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?time
                  WHERE {
                    ?match &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/Match&gt; .
                    ?match &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
                  }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_goals-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_goals</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all goals corresponding to a match by the given uri A group
contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>get_goals &quot;http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER&quot;
=&gt; [#&lt;RDF::Query::Solution:0x860c679c({:goal_uri=&gt;#&lt;RDF::URI:0x831af3c8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_3bhpwas9e4b6&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x831a2678 URI:http://dbpedia.org/resource/Thomas_M%C3%BCller&gt;, :player=&gt;#&lt;RDF::Literal:0x83bc086c(&quot;Müller&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x83197534(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x831775f4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_od8u0wuqirmt&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x832f6920(&quot;11&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860cb904({:goal_uri=&gt;#&lt;RDF::URI:0x80fd098c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_t68cap7hb3gh&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x80fb4a84 URI:http://dbpedia.org/resource/Miroslav_Klose&gt;, :player=&gt;#&lt;RDF::Literal:0x828da5e0(&quot;Klose&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x80fa0e94(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x80f45f1c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_byzvwsirjwqb&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x8333772c(&quot;23&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860c61d4({:goal_uri=&gt;#&lt;RDF::URI:0x83112eec URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_i3zsj16i95y8&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x831037a8 URI:http://dbpedia.org/resource/Toni_Kroos&gt;, :player=&gt;#&lt;RDF::Literal:0x80a567e0(&quot;Kroos&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x830f7ed0(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x830d6b90 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_01slv8jy3mzy&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x838237a4(&quot;24&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860c64b8({:goal_uri=&gt;#&lt;RDF::URI:0x8315edd8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_d0led6akvjgf&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x831522cc URI:http://dbpedia.org/resource/Toni_Kroos&gt;, :player=&gt;#&lt;RDF::Literal:0x80a567e0(&quot;Kroos&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x831472a0(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x831261f4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_ols7mjl5ozbj&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x832d60d0(&quot;26&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860cbecc({:goal_uri=&gt;#&lt;RDF::URI:0x830c64ac URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_kuidlkio4jfc&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x830b6480 URI:http://dbpedia.org/resource/Sami_Khedira&gt;, :player=&gt;#&lt;RDF::Literal:0x83b017b4(&quot;Khedira&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x830abd14(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x8308b67c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_0zt3w2rmqtpk&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x833c7804(&quot;29&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860cb620({:goal_uri=&gt;#&lt;RDF::URI:0x80f1d7c4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_u28m6giqlph2&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x80efdec4 URI:http://dbpedia.org/resource/Andr%C3%A9_Sch%C3%BCrrle&gt;,
      :player=&gt;#&lt;RDF::Literal:0x83372e58(&quot;Schürrle&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x80ee516c(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x80e98aec URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_2v07xr0lohba&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x833b6284(&quot;69&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860cbbe8({:goal_uri=&gt;#&lt;RDF::URI:0x8306feb8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_otyy0lotrj3e&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x8305e730 URI:http://dbpedia.org/resource/Andr%C3%A9_Sch%C3%BCrrle&gt;,
      :player=&gt;#&lt;RDF::Literal:0x83372e58(&quot;Schürrle&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x83053e0c(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x80ff15d8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_2yb8uyxkmj9d&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x83397924(&quot;79&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x860c6a80({:goal_uri=&gt;#&lt;RDF::URI:0x831fe874 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_17nr98dozoes&gt;,
      :player_uri=&gt;#&lt;RDF::URI:0x831ebddc URI:http://dbpedia.org/resource/Oscar_(footballer_born_1991)&gt;,
      :player=&gt;#&lt;RDF::Literal:0x828de3fc(&quot;Oscar&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x831e2e30(&quot;goal&quot;)&gt;,
      :time_uri=&gt;#&lt;RDF::URI:0x831c2784 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_0fxn56muoech&gt;,
      :time=&gt;#&lt;RDF::Literal::Int:0x83805a10(&quot;90&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;]</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of goals</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 292</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_goals'>get_goals</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?goal_uri ?player_uri ?player ?factor ?time_uri ?time
        WHERE {
          ?goal_uri &lt;http://purl.org/hpi/soccer-voc/match&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
          ?goal_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://purl.org/hpi/soccer-voc/Goal&gt; .
          ?goal_uri &lt;http://purl.org/NET/c4dm/event.owl#agent&gt; ?player_uri .
          ?player_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?player .
          ?goal_uri &lt;http://purl.org/NET/c4dm/event.owl#literal_factor&gt; ?factor .
          ?goal_uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time_uri .
          ?time_uri &lt;http://purl.org/NET/c4dm/timeline.owl#atInt&gt; ?time .
    }
    ORDER BY ASC(?time)
</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_g1'>g1</span><span class='comma'>,</span> <span class='id identifier rubyid_g2'>g2</span><span class='op'>|</span> <span class='id identifier rubyid_g1'>g1</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_g2'>g2</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>+</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_group-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_group</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a group given by a specific uri. A group contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>group = get_group &quot;http://cs.hs-rm.de/~mdudd001/semanticwc/Group_A&quot;
=&gt; #&lt;RDF::Query::Solution:0x86029dd4({:uri=&gt;#&lt;RDF::URI:0x8386387c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/Group_A&gt;,
      :label=&gt;#&lt;RDF::Literal:0x8384fbd8(&quot;Group A&quot;)&gt;})&gt;</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the group</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the group</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


230
231
232
233
234
235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 230</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_group'>get_group</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?uri ?label
    WHERE {
            ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
            }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_groups-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_groups</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all groups. The groups will be ordered by label ascending . Each
group contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of groups</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120
121
122
123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 118</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_groups'>get_groups</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label
                  WHERE {
                    ?uri &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?match_uri .
                    ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
                  }
              ORDER BY ASC(?label)
        </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_match-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_match</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a match given by a specific uri. A match contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>homeCompetitor</p>
</li><li>
<p>homeCompetitor_uri</p>
</li><li>
<p>awayCompetitor</p>
</li><li>
<p>awayCompetitor_uri</p>
</li><li>
<p>round</p>
</li><li>
<p>round_uri</p>
</li><li>
<p>venue_uri</p>
</li><li>
<p>time</p>
</li><li>
<p>homeCompetitorGoals (if present)</p>
</li><li>
<p>awayCompetitorGoals (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>match = get_match &quot;http://cs.hs-rm.de/~mdudd001/semanticwc/ALG_RUS&quot;
#=&gt;  #&lt;RDF::Query::Solution:0x8090bf98({:uri=&gt;#&lt;RDF::URI:0x80a26a90 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/ALG_RUS&gt;,
        :awayCompetitorGoals=&gt;#&lt;RDF::Literal::Int:0x8196a2a4(&quot;1&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;,
        :homeCompetitorGoals=&gt;#&lt;RDF::Literal::Int:0x82b7b254(&quot;1&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;,
        :homeCompetitor_uri=&gt;#&lt;RDF::URI:0x82b8a22c URI:http://dbpedia.org/resource/Algeria_national_football_team&gt;,
        :homeCompetitor=&gt;#&lt;RDF::Literal:0x848cce34(&quot;Algeria&quot;)&gt;,
        :awayCompetitor_uri=&gt;#&lt;RDF::URI:0x81976bbc URI:http://dbpedia.org/resource/Russia_national_football_team&gt;,
        :awayCompetitor=&gt;#&lt;RDF::Literal:0x838d673c(&quot;Russia&quot;)&gt;,
        :round_uri=&gt;#&lt;RDF::URI:0x80ec405c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/Group_H&gt;, :round=&gt;#&lt;RDF::Literal:0x80e941b8(&quot;Group H&quot;)&gt;,
        :venue_uri=&gt;#&lt;RDF::URI:0x8197f758 URI:http://dbpedia.org/resource/Arena_da_Baixada&gt;,
        :time=&gt;#&lt;RDF::Literal::DateTime:0x82bb213c(&quot;2014-06-26T17:00:00.000-03:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;)&gt;})&gt;</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the match</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 200</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_match'>get_match</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?uri ?homeCompetitor ?homeCompetitor_uri ?awayCompetitor ?awayCompetitor_uri ?round ?round_uri ?venue_uri ?time ?homeCompetitorGoals ?awayCompetitorGoals
  WHERE {
          ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; ?homeCompetitor_uri .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; ?homeCompetitor_uri .
          ?homeCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?homeCompetitor .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>awayCompetitor&gt; ?awayCompetitor_uri .
          ?awayCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?awayCompetitor .
          ?round_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>hasMatch&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
          ?round_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?round .
          ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Venue&gt; ?venue_uri .
          ?uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
          OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/homeCompetitorGoals&gt; ?homeCompetitorGoals . }.
          OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/awayCompetitorGoals&gt; ?awayCompetitorGoals . }.
          }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_matches-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>, <tt>String</tt>) <strong>get_matches</strong>(filter_uri = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all matches filtered by a specific filter. The matches will be
ordered by time ascending . Each match contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>homeCompetitor</p>
</li><li>
<p>homeCompetitor_uri</p>
</li><li>
<p>awayCompetitor</p>
</li><li>
<p>awayCompetitor_uri</p>
</li><li>
<p>round</p>
</li><li>
<p>round_uri</p>
</li><li>
<p>venue_uri</p>
</li><li>
<p>time</p>
</li><li>
<p>homeCompetitorGoals (if present)</p>
</li><li>
<p>awayCompetitorGoals (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filter_uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the filter type, can be a group, day, stadium, team or none filter</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of matches and the calculated filter_type</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_matches'>get_matches</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_optional_filter'>optional_filter</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter_uri'>filter_uri</span>
                      <span class='kw'>if</span> <span class='id identifier rubyid_filter_uri'>filter_uri</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\d{4}\-\d{2}\-\d{2}</span><span class='regexp_end'>/</span></span>
                        <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>day</span><span class='tstring_end'>&#39;</span></span>
                        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FILTER(?time &gt;= \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>T00:00:00.000-03:00\&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; &amp;&amp; ?time &lt;= \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>T23:59:59.000-03:00\&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;)</span><span class='tstring_end'>&quot;</span></span>
                      <span class='kw'>else</span>
                        <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?stadium ?type ?group WHERE {
                                ?s ?p ?o .
                                OPTIONAL { ?stadium &lt;http://www.bbc.co.uk/ontologies/sport/Venue&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . }.
                                OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?type . }.
                                OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?group . }.
                      }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_has_variables?'>has_variables?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stadium</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                          <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stadium</span><span class='tstring_end'>&#39;</span></span>
                          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Venue&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>elsif</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_has_variables?'>has_variables?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                          <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span>
                          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?uri .</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>elsif</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_has_variables?'>has_variables?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                          <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://purl.org/hpi/soccer-voc/SoccerClub</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>team</span><span class='tstring_end'>&#39;</span></span>
                            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{ ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . } UNION { ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>awayCompetitor&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . }</span><span class='tstring_end'>&quot;</span></span>
                          <span class='kw'>end</span>
                        <span class='kw'>else</span>
                          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                        <span class='kw'>end</span>
                      <span class='kw'>end</span>
                    <span class='kw'>end</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
            SELECT ?uri ?homeCompetitor ?homeCompetitor_uri ?awayCompetitor ?awayCompetitor_uri ?round ?round_uri ?venue_uri ?time ?homeCompetitorGoals ?awayCompetitorGoals
            WHERE {
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Match&gt; .
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; ?homeCompetitor_uri .
              ?homeCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?homeCompetitor .
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>awayCompetitor&gt; ?awayCompetitor_uri .
              ?awayCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?awayCompetitor .
              ?round_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>hasMatch&gt; ?uri .
              ?round_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?round .
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Venue&gt; ?venue_uri .
              ?uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
              OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/homeCompetitorGoals&gt; ?homeCompetitorGoals . }.
              OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/awayCompetitorGoals&gt; ?awayCompetitorGoals . }.
              </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_optional_filter'>optional_filter</span><span class='embexpr_end'>}</span><span class='tstring_content'>
            }
            ORDER BY ASC(?time)
            </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='comma'>,</span> <span class='id identifier rubyid_filter_type'>filter_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_multi_stage_competitions-instance_method">
  
    - (<tt>Object</tt>) <strong>get_multi_stage_competitions</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_multi_stage_competitions'>get_multi_stage_competitions</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT * WHERE { ?s &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>MultiStageCompetition&gt; }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_player-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_player</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a player given by the uri. A player contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li><li>
<p>surname (if present)</p>
</li><li>
<p>givenName (if present)</p>
</li><li>
<p>fullname (if present)</p>
</li><li>
<p>position (if present)</p>
</li><li>
<p>birth_date (if present)</p>
</li><li>
<p>current_club_uri (if present)</p>
</li><li>
<p>current_club (if present)</p>
</li><li>
<p>image_url (if present)</p>
</li><li>
<p>thumbnail_url (if present)</p>
</li><li>
<p>abstract (if present)</p>
</li><li>
<p>team (if present)</p>
</li><li>
<p>team_uri (if present)</p>
</li><li>
<p>caps (if present)</p>
</li><li>
<p>goals (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the player</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the player</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 458</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_player'>get_player</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?name ?surname ?givenName ?fullname ?position ?birth_date ?current_club_uri ?current_club ?image_url ?thumbnail_url ?abstract ?team ?team_uri ?caps ?goals
        WHERE {
          ?uri &lt;http://dbpedia.org/property/name&gt; ?name .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/name&gt; ?name .
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/surname&gt; ?surname }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/givenName&gt; ?givenName }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/fullname&gt; ?fullname }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/nationalcaps&gt; ?caps }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/nationalgoals&gt; ?goals }.
          OPTIONAL {  &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/nationalteam&gt; ?team_uri .
                      ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?team .
                      ?team_uri &lt;http://dbpedia.org/property/fifaRank&gt; ?fifa_rank .
                      FILTER(LANG(?team) = &#39;de&#39;)
                    }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/position&gt; ?position }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/currentclub&gt; ?current_club_uri .
                    ?current_club_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?current_club
                    FILTER ( LANG(?current_club) = &#39;de&#39;)
                    }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract .
                     FILTER(LANG(?abstract) = &#39;de&#39;) .
                    }.
        }
        ORDER BY DESC(?caps) DESC(?goals)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_player_team_stations-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_player_team_stations</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all team stations (only clubs) with time period a player
participated in descendant order given by the uri of player. A team_station
contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>career_station_uri</p>
</li><li>
<p>years</p>
</li><li>
<p>team_uri</p>
</li><li>
<p>clubname (if present)</p>
</li><li>
<p>name (if present)</p>
</li><li>
<p>nickname (if present)</p>
</li><li>
<p>label (if present)</p>
</li><li>
<p>altname (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team_station</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the team_station</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 611</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_player_team_stations'>get_player_team_stations</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?career_station_uri ?years ?team_uri ?clubname ?name ?nickname ?label ?altname
      WHERE {
        {
          ?uri &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
          ?career_station_uri &lt;http://dbpedia.org/ontology/years&gt; ?years .
          ?career_station_uri &lt;http://dbpedia.org/ontology/team&gt; ?team_uri .
          OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/clubname&gt; ?clubname . FILTER(LANG(?clubname) = &#39;en&#39;)}.
          OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/nickname&gt; ?nickname . FILTER(LANG(?nickname) = &#39;en&#39;)}.
          OPTIONAL { ?team_uri &lt;http://xmlns.com/foaf/0.1/name&gt; ?name . FILTER(LANG(?name) = &#39;en&#39;)}.
          OPTIONAL { ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label . FILTER(LANG(?label) = &#39;en&#39;) }.
          OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/fullname&gt; ?altname . FILTER(LANG(?altname) = &#39;en&#39;) }.
        }
        MINUS { ?team_uri &lt;http://dbpedia.org/property/association&gt; ?association . }.
      }
      ORDER BY DESC(?years)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='comment'># do uniq
</span>  <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_career_station_uri'>career_station_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_sol'>sol</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_player_uri-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>get_player_uri</strong>(name, team_uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>guess a player uri by a given name and the uri of the team</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the player</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri player at dbpedia</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 393</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_player_uri'>get_player_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_team_uri'>team_uri</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?player_uri ?team_uri
      WHERE {
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/fullname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/surname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/givenName&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/fullname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/givenName&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/surname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/fullname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/surname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/givenName&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        ?player_uri &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://dbpedia.org/ontology/SoccerPlayer&gt; .
        ?player_uri &lt;http://dbpedia.org/property/nationalteam&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_team_uri'>team_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
        ?player_uri &lt;http://dbpedia.org/property/nationalteam&gt; ?team_uri
        OPTIONAL { ?player_uri &lt;http://dbpedia.org/property/nationalcaps&gt; ?caps }.
        OPTIONAL { ?player_uri &lt;http://dbpedia.org/property/nationalgoals&gt; ?goals }.
        ?player_uri &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date .
        FILTER(?birth_date &gt; \&quot;19700101\&quot;^^xsd:date)
      }
      ORDER BY DESC(?caps) DESC(?goals)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_player_uri'>player_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_players_for_team-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_players_for_team</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all players of a team given by the uri A player contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li><li>
<p>team_uri</p>
</li><li>
<p>team</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of the players</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


367
368
369
370
371
372
373
374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 367</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_players_for_team'>get_players_for_team</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label ?team_uri ?team
        WHERE {
          ?uri &lt;http://purl.org/hpi/soccer-voc/playsFor&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
          ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
          ?uri &lt;http://purl.org/hpi/soccer-voc/playsFor&gt; ?team_uri .
          ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?team .
        }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_rounds-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_rounds</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all rounds. The groups will be ordered by time ascending . Each
rounds contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li><li>
<p>time</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of rounds</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 137</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_rounds'>get_rounds</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label ?time
                    WHERE {
                      {
                        ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/KnockoutCompetition&gt; .
                        ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
                        ?uri &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?match_uri .
                        ?match_uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
                      }
                      UNION
                      {
                        ?uri &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?match_uri .
                        ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
                        ?match_uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
                      }
                    }
                ORDER BY ASC(?time)
          </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_stadium-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_stadium</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a stadium given by the uri. A stadium contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li><li>
<p>city_uri</p>
</li><li>
<p>city</p>
</li><li>
<p>population</p>
</li><li>
<p>lat</p>
</li><li>
<p>long</p>
</li><li>
<p>capacity (if present)</p>
</li><li>
<p>seatingCapacity (if present)</p>
</li><li>
<p>image_url (if present)</p>
</li><li>
<p>thumbnail_url (if present)</p>
</li><li>
<p>abstract (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the stadium</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stadium</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 506</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_stadium'>get_stadium</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
  SELECT DISTINCT ?uri ?name ?city_uri ?city ?population ?lat ?long ?capacity ?seatingCapacity ?image_url ?thumbnail_url ?abstract
          WHERE {
            ?uri  &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?name .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?name .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/location&gt; ?city_uri .
            ?city_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?city .
            ?city_uri &lt;http://dbpedia.org/ontology/populationTotal&gt; ?population .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.w3.org/2003/01/geo/wgs84_pos#lat&gt; ?lat .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.w3.org/2003/01/geo/wgs84_pos#long&gt; ?long .
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/capacity&gt; ?capacity }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/seatingCapacity&gt; ?seatingCapacity }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract }.
            FILTER (str(?uri) = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; &amp;&amp; lang(?city) = &#39;en&#39; &amp;&amp; lang(?name) = &#39;en&#39; &amp;&amp; ?population &gt; 5000)
          }
  </span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_city_uri'>city_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://dbpedia.org/resource/Brazil</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_stadiums-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_stadiums</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all stadiums.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of stadiums</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_stadium-instance_method" title="RdfHelper#get_stadium (method)">for content of a stadium</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105
106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_stadiums'>get_stadiums</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT DISTINCT ?uri
              WHERE {
                ?match &lt;http://www.bbc.co.uk/ontologies/sport/Venue&gt; ?uri .
              }</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='id identifier rubyid_get_stadium'>get_stadium</span><span class='lparen'>(</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_team-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_team</strong>(uri, lang_filter = true) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return a team given by a specific uri. A team contains uri,</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the team</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 337</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_team'>get_team</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_lang_filter'>lang_filter</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FILTER (str(?uri) = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_filter'>filter</span> <span class='op'>+=</span> <span class='id identifier rubyid_lang_filter'>lang_filter</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;&amp; LANG(?label) = &#39;de&#39;)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?uri ?label ?name ?image_url ?thumbnail_url ?abstract ?coach ?coach_uri ?wiki_uri
      WHERE {
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
              &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; ?name FILTER ( LANG(?name) = &#39;de&#39; ) } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/isPrimaryTopicOf&gt; ?wiki_uri }.
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/coach&gt; ?coach_uri .
                ?coach_uri &lt;http://xmlns.com/foaf/0.1/name&gt; ?coach }.
              </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter'>filter</span><span class='embexpr_end'>}</span><span class='tstring_content'>
              }</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>||=</span> <span class='id identifier rubyid_get_team'>get_team</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_lang_filter'>lang_filter</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_solution'>solution</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_team_uri-instance_method">
  
    - (<tt>String</tt>) <strong>get_team_uri</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>guess a team uri by a given team name</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the county</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the national footbll team in dbpedia</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 312</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_team_uri'>get_team_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='comment'>#sparql = &quot;SELECT ?uri WHERE { ?uri &lt;http://dbpedia.org/property/fifaTrigramme&gt; \&quot;#{name}\&quot; . }&quot;
</span>  <span class='comment'>#solution = DBPEDIA.query(sparql).first
</span>  <span class='id identifier rubyid_exceptions'>exceptions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USA</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Vereinigte Staaten</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_exceptions'>exceptions</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_exceptions'>exceptions</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
  SELECT DISTINCT ?country_name
          WHERE {
            ?country_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@de .
            ?country_uri  &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?country_name .
            ?country_uri &lt;http://dbpedia.org/property/commonName&gt; ?common_name .
            FILTER ( LANG(?country_name) = &#39;en&#39; )
          }
  </span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='id identifier rubyid_country_name'>country_name</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>?</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_country_name'>country_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_national_football_team</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://dbpedia.org/resource/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_country_name'>country_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_teams-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_teams</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all teams. The teams will be ordered by name ascending . Each team
contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of teams</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90
91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 88</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_teams'>get_teams</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?name
                  WHERE {
                    ?group_uri &lt;http://www.bbc.co.uk/ontologies/sport/hasCompetitor&gt; ?uri .
                    ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?name .
                  }
                ORDER BY ASC(?name)
          </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_trainer-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_trainer</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a trainer given by the uri. A trainer contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li><li>
<p>surname (if present)</p>
</li><li>
<p>givenName (if present)</p>
</li><li>
<p>fullname (if present)</p>
</li><li>
<p>birth_date (if present)</p>
</li><li>
<p>image_url (if present)</p>
</li><li>
<p>thumbnail_url (if present)</p>
</li><li>
<p>abstract (if present)</p>
</li><li>
<p>team_uri (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the stadium</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stadium</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 543</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_trainer'>get_trainer</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?name ?surname ?givenName ?fullname ?birth_date ?image_url ?thumbnail_url ?abstract ?team_uri
         WHERE {
           ?uri &lt;http://dbpedia.org/property/name&gt; ?name .
           &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/name&gt; ?name .
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/surname&gt; ?surname }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/givenName&gt; ?givenName }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/fullname&gt; ?fullname }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date . }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url . }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url . }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract . FILTER ( LANG(?abstract) = &#39;de&#39; ) }.
           OPTIONAL { ?team_uri &lt;http://dbpedia.org/ontology/coach&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . }.
         }</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_trainer_team_stations-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_trainer_team_stations</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all team stations (only clubs) with time period a trainer
participated in descendant order given by the uri of trainer. A
team_station contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>career_station_uri</p>
</li><li>
<p>years</p>
</li><li>
<p>team_uri</p>
</li><li>
<p>clubname (if present)</p>
</li><li>
<p>name (if present)</p>
</li><li>
<p>nickname (if present)</p>
</li><li>
<p>label (if present)</p>
</li><li>
<p>altname (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team_station</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the team_station</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 647</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_trainer_team_stations'>get_trainer_team_stations</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?career_station_uri ?years ?team_uri ?clubname ?name ?nickname ?label ?altname
          WHERE {
            {
              ?uri &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
              &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
              ?career_station_uri &lt;http://dbpedia.org/ontology/years&gt; ?years .
              ?career_station_uri &lt;http://dbpedia.org/ontology/team&gt; ?team_uri .
              OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/clubname&gt; ?clubname . FILTER(LANG(?clubname) = &#39;en&#39;)}.
              OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/nickname&gt; ?nickname . FILTER(LANG(?nickname) = &#39;en&#39;)}.
              OPTIONAL { ?team_uri &lt;http://xmlns.com/foaf/0.1/name&gt; ?name . FILTER(LANG(?name) = &#39;en&#39;)}.
              OPTIONAL { ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label . FILTER(LANG(?label) = &#39;en&#39;) }.
              OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/fullname&gt; ?altname . FILTER(LANG(?altname) = &#39;en&#39;) }.
            }
          }
          ORDER BY DESC(?years)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
  <span class='comment'># do uniq
</span>  <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_career_station_uri'>career_station_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_sol'>sol</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_trainer_uri-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>get_trainer_uri</strong>(name, team_uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>guess a trainer uri by a given name and uri of the team</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the trainer</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri trainer at dbpedia</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 564</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_trainer_uri'>get_trainer_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_team_uri'>team_uri</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?trainer_uri ?team_uri
      WHERE {
        ?trainer_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en .
        ?trainer_uri &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://dbpedia.org/ontology/SoccerManager&gt; .
        ?trainer_uri &lt;http://dbpedia.org/ontology/coach&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_team_uri'>team_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
        ?trainer_uri &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date .
        FILTER(?birth_date &gt; \&quot;19000101\&quot;^^xsd:date)
      }</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
             <span class='kw'>when</span> <span class='int'>0</span> <span class='comment'># fallback
</span>               <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?trainer_uri ?team_uri
              WHERE {
                ?trainer_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en .
                ?trainer_uri &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://dbpedia.org/ontology/SoccerManager&gt; .
                ?trainer_uri &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date .
                FILTER(?birth_date &gt; \&quot;19000101\&quot;^^xsd:date)
              }</span><span class='tstring_end'>&quot;</span></span>
               <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
               <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
             <span class='kw'>when</span> <span class='int'>1</span>
               <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
             <span class='kw'>else</span>
               <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
           <span class='kw'>end</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_trainer_uri'>trainer_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tmp_get_player-instance_method">
  
    - (<tt>Object</tt>) <strong>tmp_get_player</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'></div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381
382
383
384
385
386
387</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 379</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tmp_get_player'>tmp_get_player</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label ?team_uri ?team
        WHERE {
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://purl.org/hpi/soccer-voc/playsFor&gt; ?team_uri .
          ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?team .
        }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Aug  7 23:15:55 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.1.2).
</div>

  </body>
</html>
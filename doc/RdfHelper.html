<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: RdfHelper
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!RdfHelper.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (R)</a> &raquo;
    
    
    <span class="title">RdfHelper</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: RdfHelper
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="ApplicationController.html" title="ApplicationController (class)">ApplicationController</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/helpers/rdf_helper.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Manuel Dudda &lt;dudda@redpeppix.de&gt;</p>
</div>
      
    </li>
  
</ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="RDF_TTL_FILE-constant" class="">RDF_TTL_FILE =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_root'>root</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>db</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>worldcup.ttl</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span></pre></dd>
      
        <dt id="QUERYABLE-constant" class="">QUERYABLE =
          
        </dt>
        <dd><pre class="code"><span class='const'>RDF</span><span class='op'>::</span><span class='const'>Repository</span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span><span class='lparen'>(</span><span class='const'>RDF_TTL_FILE</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="DBPEDIA-constant" class="">DBPEDIA =
          
        </dt>
        <dd><pre class="code"><span class='const'>SPARQL</span><span class='op'>::</span><span class='const'>Client</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://dbpedia.org/sparql</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_days-instance_method" title="#get_days (instance method)">- (Array&lt;Date&gt;) <strong>get_days</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all matchdays.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_goals-instance_method" title="#get_goals (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_goals</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all goals corresponding to a match by the given uri A group
contains - uri - label.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_group-instance_method" title="#get_group (instance method)">- (RDF::Query::Solution) <strong>get_group</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a group given by a specific uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_groups-instance_method" title="#get_groups (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_groups</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all groups.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_match-instance_method" title="#get_match (instance method)">- (RDF::Query::Solution) <strong>get_match</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a match given by a specific uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_matches-instance_method" title="#get_matches (instance method)">- (Array&lt;RDF::Query::Solution&gt;, String) <strong>get_matches</strong>(filter_uri = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all matches filtered by a specific filter.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_multi_stage_competitions-instance_method" title="#get_multi_stage_competitions (instance method)">- (Object) <strong>get_multi_stage_competitions</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_player-instance_method" title="#get_player (instance method)">- (RDF::Query::Solution) <strong>get_player</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a player given by the uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_player_team_stations-instance_method" title="#get_player_team_stations (instance method)">- (RDF::Query::Solution) <strong>get_player_team_stations</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all team stations (only clubs) with time period a player
participated in descendant order given by the uri of player.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_player_uri-instance_method" title="#get_player_uri (instance method)">- (String<sup>?</sup>) <strong>get_player_uri</strong>(name, team_uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>guess a player uri by a given name and the uri of the team.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_players_for_team-instance_method" title="#get_players_for_team (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_players_for_team</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all players of a team given by the uri A player contains - uri -
label - team_uri - team.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_stadium-instance_method" title="#get_stadium (instance method)">- (RDF::Query::Solution) <strong>get_stadium</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a stadium given by the uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_stadiums-instance_method" title="#get_stadiums (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_stadiums</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all stadiums.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_team-instance_method" title="#get_team (instance method)">- (RDF::Query::Solution) <strong>get_team</strong>(uri, lang_filter = true) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return a team given by a specific uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_team_uri-instance_method" title="#get_team_uri (instance method)">- (String) <strong>get_team_uri</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>guess a team uri by a given team name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_teams-instance_method" title="#get_teams (instance method)">- (Array&lt;RDF::Query::Solution&gt;) <strong>get_teams</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns all teams.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_trainer-instance_method" title="#get_trainer (instance method)">- (RDF::Query::Solution) <strong>get_trainer</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>returns a trainer given by the uri.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_trainer_team_stations-instance_method" title="#get_trainer_team_stations (instance method)">- (RDF::Query::Solution) <strong>get_trainer_team_stations</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>return all team stations (only clubs) with time period a trainer
participated in descendant order given by the uri of trainer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_trainer_uri-instance_method" title="#get_trainer_uri (instance method)">- (String<sup>?</sup>) <strong>get_trainer_uri</strong>(name, team_uri) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>guess a trainer uri by a given name and uri of the team.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#tmp_get_player-instance_method" title="#tmp_get_player (instance method)">- (Object) <strong>tmp_get_player</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_days-instance_method">
  
    - (<tt>Array&lt;Date&gt;</tt>) <strong>get_days</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all matchdays. Dates without matches are filtered. The days will be
ordered by ascending .</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;Date&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the days</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 132</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_days'>get_days</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?time
                  WHERE {
                    ?match &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/Match&gt; .
                    ?match &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
                  }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_time'>time</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_goals-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_goals</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all goals corresponding to a match by the given uri A group
contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>get_goals &quot;http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER&quot;
=&gt; [#&lt;RDF::Query::Solution:0x811eaa60({:goal_uri=&gt;#&lt;RDF::URI:0x8340cd00 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_6n5btfo5mboh&gt;, :player_uri=&gt;#&lt;RDF::URI:0x82fee8a4 URI:http://dbpedia.org/resource/Miroslav_Klose&gt;, :player=&gt;#&lt;RDF::Literal:0x8360d578(&quot;Klose&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x82fdfbb0(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x82fbeb18 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_apxm5qkpsabb&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82dc4fb0(&quot;23&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x81232f18({:goal_uri=&gt;#&lt;RDF::URI:0x82f0e3f8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_sdhr1m0idmhf&gt;, :player_uri=&gt;#&lt;RDF::URI:0x82effdd0 URI:http://dbpedia.org/resource/Toni_Kroos&gt;, :player=&gt;#&lt;RDF::Literal:0x849b8a64(&quot;Kroos&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x82ef6ce4(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x82ecfb44 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_nc8d8k09ne8d&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82d3c304(&quot;24&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x81233a44({:goal_uri=&gt;#&lt;RDF::URI:0x82f626c4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_okeofvexrx5m&gt;, :player_uri=&gt;#&lt;RDF::URI:0x82f4bc6c URI:http://dbpedia.org/resource/Toni_Kroos&gt;, :player=&gt;#&lt;RDF::Literal:0x849b8a64(&quot;Kroos&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x82f42c34(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x82f1ebf4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_8vnkbjpsleto&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82e27318(&quot;26&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x811e2360({:goal_uri=&gt;#&lt;RDF::URI:0x834c11c4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_242d66ss06ce&gt;, :player_uri=&gt;#&lt;RDF::URI:0x8154e92c URI:http://dbpedia.org/resource/Sami_Khedira&gt;, :player=&gt;#&lt;RDF::Literal:0x8453c738(&quot;Khedira&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x8154c190(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x834b14f4 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_8k489q705ea9&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82e48e28(&quot;29&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x811eb7bc({:goal_uri=&gt;#&lt;RDF::URI:0x834a1720 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_4d2c99v16pfl&gt;, :player_uri=&gt;#&lt;RDF::URI:0x834959e8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/Sch%C3%9Crrle&gt;, :player=&gt;#&lt;RDF::Literal:0x84981898(&quot;SchÜrrle&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x834914c4(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x83470440 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_fj7qnfsj35uo&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82da81f8(&quot;69&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x811e2ec8({:goal_uri=&gt;#&lt;RDF::URI:0x80da7a98 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_21fpfwboblr0&gt;, :player_uri=&gt;#&lt;RDF::URI:0x834ecc48 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/Sch%C3%9Crrle&gt;, :player=&gt;#&lt;RDF::Literal:0x84981898(&quot;SchÜrrle&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x834e1a8c(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x834d13a8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_27mptbfwku0l&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82e87a10(&quot;79&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;,
    #&lt;RDF::Query::Solution:0x8122f700({:goal_uri=&gt;#&lt;RDF::URI:0x82fab6a8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Goal_7fzbfo4erac0&gt;, :player_uri=&gt;#&lt;RDF::URI:0x82f9bf3c URI:http://dbpedia.org/resource/Oscar_(footballer_born_1991)&gt;, :player=&gt;#&lt;RDF::Literal:0x83630d84(&quot;Oscar&quot;)&gt;,
      :factor=&gt;#&lt;RDF::Literal:0x82f93544(&quot;goal&quot;)&gt;, :time_uri=&gt;#&lt;RDF::URI:0x82f72768 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/BRA_GER_Time_iai5lf3rvwdf&gt;, :time=&gt;#&lt;RDF::Literal::Int:0x82d7d714(&quot;90&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;})&gt;]</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of goals</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233
234
235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_goals'>get_goals</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?goal_uri ?player_uri ?player ?factor ?time_uri ?time
        WHERE {
          ?goal_uri &lt;http://purl.org/hpi/soccer-voc/match&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
          ?goal_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://purl.org/hpi/soccer-voc/Goal&gt; .
          ?goal_uri &lt;http://purl.org/NET/c4dm/event.owl#agent&gt; ?player_uri .
          ?player_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?player .
          ?goal_uri &lt;http://purl.org/NET/c4dm/event.owl#literal_factor&gt; ?factor .
          ?goal_uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time_uri .
          ?time_uri &lt;http://purl.org/NET/c4dm/timeline.owl#atInt&gt; ?time .
    }
    ORDER BY ASC(?time)
</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_group-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_group</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a group given by a specific uri. A group contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code>group = get_group &quot;http://cs.hs-rm.de/~mdudd001/semanticwc/Group_A&quot;
=&gt; #&lt;RDF::Query::Solution:0x85db4d24({:uri=&gt;#&lt;RDF::URI:0x82fbace8 URI:http://cs.hs-rm.de/~mdudd001/semanticwc/Group_A&gt;, :label=&gt;#&lt;RDF::Literal:0x82fae6c8(&quot;Group_A&quot;)&gt;})&gt;</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the group</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the group</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192
193
194
195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_group'>get_group</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?uri ?label
    WHERE {
            ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
            }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_groups-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_groups</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all groups. The groups will be ordered by label ascending . Each
group contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of groups</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121
122
123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_groups'>get_groups</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label
                  WHERE {
                    ?uri &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?match_uri .
                    ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
                  }
              ORDER BY ASC(?label)
        </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_match-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_match</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a match given by a specific uri. A match contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>homeCompetitor</p>
</li><li>
<p>homeCompetitor_uri</p>
</li><li>
<p>awayCompetitor</p>
</li><li>
<p>awayCompetitor_uri</p>
</li><li>
<p>round</p>
</li><li>
<p>round_uri</p>
</li><li>
<p>venue_uri</p>
</li><li>
<p>time</p>
</li><li>
<p>homeCompetitorGoals (if present)</p>
</li><li>
<p>awayCompetitorGoals (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_get_match'>get_match</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://cs.hs-rm.de/~mdudd001/semanticwc/ALG_RUS</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'>#=&gt;  #&lt;RDF::Query::Solution:0x84789194({:uri=&gt;#&lt;RDF::URI:0x849e823c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/ALG_RUS&gt;, :awayCompetitorGoals=&gt;#&lt;RDF::Literal::Int:0x8492cbb8(&quot;1&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;, :homeCompetitorGoals=&gt;#&lt;RDF::Literal::Int:0x84918168(&quot;1&quot;^^&lt;http://www.w3.org/2001/XMLSchema#int&gt;)&gt;, :homeCompetitor_uri=&gt;#&lt;RDF::URI:0x84924bac URI:http://dbpedia.org/resource/Algeria_national_football_team&gt;, :homeCompetitor=&gt;#&lt;RDF::Literal:0x812a7fc0(&quot;Algeria&quot;)&gt;, :awayCompetitor_uri=&gt;#&lt;RDF::URI:0x84939660 URI:http://dbpedia.org/resource/Russia_national_football_team&gt;, :awayCompetitor=&gt;#&lt;RDF::Literal:0x83640e3c(&quot;Russia&quot;)&gt;, :round_uri=&gt;#&lt;RDF::URI:0x80976c1c URI:http://cs.hs-rm.de/~mdudd001/semanticwc/Group_H&gt;, :round=&gt;#&lt;RDF::Literal:0x809638b0(&quot;Group_H&quot;)&gt;, :venue_uri=&gt;#&lt;RDF::URI:0x84941d4c URI:http://dbpedia.org/resource/Arena_da_Baixada&gt;, :time=&gt;#&lt;RDF::Literal::DateTime:0x849d5bb4(&quot;2014-06-26T17:00:00.000-03:00&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;)&gt;})&gt;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the match</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the match</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 161</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_match'>get_match</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?uri ?homeCompetitor ?homeCompetitor_uri ?awayCompetitor ?awayCompetitor_uri ?round ?round_uri ?venue_uri ?time ?homeCompetitorGoals ?awayCompetitorGoals
  WHERE {
          ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; ?homeCompetitor_uri .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; ?homeCompetitor_uri .
          ?homeCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?homeCompetitor .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>awayCompetitor&gt; ?awayCompetitor_uri .
          ?awayCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?awayCompetitor .
          ?round_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>hasMatch&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
          ?round_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?round .
          ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Venue&gt; ?venue_uri .
          ?uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
          OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/homeCompetitorGoals&gt; ?homeCompetitorGoals . }.
          OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/awayCompetitorGoals&gt; ?awayCompetitorGoals . }.
          }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_matches-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>, <tt>String</tt>) <strong>get_matches</strong>(filter_uri = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all matches filtered by a specific filter. The matches will be
ordered by time ascending . Each match contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>homeCompetitor</p>
</li><li>
<p>homeCompetitor_uri</p>
</li><li>
<p>awayCompetitor</p>
</li><li>
<p>awayCompetitor_uri</p>
</li><li>
<p>round</p>
</li><li>
<p>round_uri</p>
</li><li>
<p>venue_uri</p>
</li><li>
<p>time</p>
</li><li>
<p>homeCompetitorGoals (if present)</p>
</li><li>
<p>awayCompetitorGoals (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filter_uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the filter type, can be a group, day, stadium, team or none filter</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of matches and the calculated filter_type</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 29</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_matches'>get_matches</span><span class='lparen'>(</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_optional_filter'>optional_filter</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='id identifier rubyid_filter_uri'>filter_uri</span>
                      <span class='kw'>if</span> <span class='id identifier rubyid_filter_uri'>filter_uri</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\d{4}\-\d{2}\-\d{2}</span><span class='regexp_end'>/</span></span>
                        <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>day</span><span class='tstring_end'>&#39;</span></span>
                        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FILTER(?time &gt;= \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>T00:00:00.000-03:00\&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt; &amp;&amp; ?time &lt;= \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>T23:59:59.000-03:00\&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;)</span><span class='tstring_end'>&quot;</span></span>
                      <span class='kw'>else</span>
                        <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?stadium ?type ?group WHERE {
                                ?s ?p ?o .
                                OPTIONAL { ?stadium &lt;http://www.bbc.co.uk/ontologies/sport/Venue&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . }.
                                OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?type . }.
                                OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?group . }.
                      }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                        <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
                        <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_has_variables?'>has_variables?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stadium</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                          <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>stadium</span><span class='tstring_end'>&#39;</span></span>
                          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Venue&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>elsif</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_has_variables?'>has_variables?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                          <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>group</span><span class='tstring_end'>&#39;</span></span>
                          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.bbc.co.uk/ontologies/sport/hasMatch&gt; ?uri .</span><span class='tstring_end'>&quot;</span></span>
                        <span class='kw'>elsif</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_has_variables?'>has_variables?</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                          <span class='kw'>if</span> <span class='id identifier rubyid_solution'>solution</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://purl.org/hpi/soccer-voc/SoccerClub</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
                            <span class='id identifier rubyid_filter_type'>filter_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>team</span><span class='tstring_end'>&#39;</span></span>
                            <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{ ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . } UNION { ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>awayCompetitor&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter_uri'>filter_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . }</span><span class='tstring_end'>&quot;</span></span>
                          <span class='kw'>end</span>
                        <span class='kw'>else</span>
                          <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
                        <span class='kw'>end</span>
                      <span class='kw'>end</span>
                    <span class='kw'>end</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
            SELECT ?uri ?homeCompetitor ?homeCompetitor_uri ?awayCompetitor ?awayCompetitor_uri ?round ?round_uri ?venue_uri ?time ?homeCompetitorGoals ?awayCompetitorGoals
            WHERE {
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Match&gt; .
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>homeCompetitor&gt; ?homeCompetitor_uri .
              ?homeCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?homeCompetitor .
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>awayCompetitor&gt; ?awayCompetitor_uri .
              ?awayCompetitor_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?awayCompetitor .
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>Venue&gt; ?venue_uri .
              ?uri &lt;http://purl.org/NET/c4dm/event.owl#time&gt; ?time .
              OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/homeCompetitorGoals&gt; ?homeCompetitorGoals . }.
              OPTIONAL { ?uri &lt;http://www.bbc.co.uk/ontologies/sport/awayCompetitorGoals&gt; ?awayCompetitorGoals . }.
              </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_optional_filter'>optional_filter</span><span class='embexpr_end'>}</span><span class='tstring_content'>
            }
            ORDER BY ASC(?time)
            </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='comma'>,</span> <span class='id identifier rubyid_filter_type'>filter_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_multi_stage_competitions-instance_method">
  
    - (<tt>Object</tt>) <strong>get_multi_stage_competitions</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 7</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_multi_stage_competitions'>get_multi_stage_competitions</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT * WHERE { ?s &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>PREFIX</span><span class='op'>::</span><span class='const'>BBCSPORT</span><span class='embexpr_end'>}</span><span class='tstring_content'>MultiStageCompetition&gt; }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_player-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_player</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a player given by the uri. A player contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li><li>
<p>surname (if present)</p>
</li><li>
<p>givenName (if present)</p>
</li><li>
<p>fullname (if present)</p>
</li><li>
<p>position (if present)</p>
</li><li>
<p>birth_date (if present)</p>
</li><li>
<p>current_club_uri (if present)</p>
</li><li>
<p>current_club (if present)</p>
</li><li>
<p>image_url (if present)</p>
</li><li>
<p>thumbnail_url (if present)</p>
</li><li>
<p>abstract (if present)</p>
</li><li>
<p>team (if present)</p>
</li><li>
<p>team_uri (if present)</p>
</li><li>
<p>caps (if present)</p>
</li><li>
<p>goals (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the player</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the player</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 382</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_player'>get_player</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?name ?surname ?givenName ?fullname ?position ?birth_date ?current_club_uri ?current_club ?image_url ?thumbnail_url ?abstract ?team ?team_uri ?caps ?goals
        WHERE {
          ?uri &lt;http://dbpedia.org/property/name&gt; ?name .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/name&gt; ?name .
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/surname&gt; ?surname }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/givenName&gt; ?givenName }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/fullname&gt; ?fullname }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/nationalcaps&gt; ?caps }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/nationalgoals&gt; ?goals }.
          OPTIONAL {  &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/nationalteam&gt; ?team_uri .
                      ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?team .
                      ?team_uri &lt;http://dbpedia.org/property/fifaRank&gt; ?fifa_rank .
                      FILTER(LANG(?team) = &#39;de&#39;)
                    }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/position&gt; ?position }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/currentclub&gt; ?current_club_uri .
                    ?current_club_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?current_club
                    FILTER ( LANG(?current_club) = &#39;de&#39;)
                    }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url }.
          OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract .
                     FILTER(LANG(?abstract) = &#39;de&#39;) .
                    }.
        }
        ORDER BY DESC(?caps) DESC(?goals)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_player_team_stations-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_player_team_stations</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all team stations (only clubs) with time period a player
participated in descendant order given by the uri of player. A team_station
contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>career_station_uri</p>
</li><li>
<p>years</p>
</li><li>
<p>team_uri</p>
</li><li>
<p>clubname (if present)</p>
</li><li>
<p>name (if present)</p>
</li><li>
<p>nickname (if present)</p>
</li><li>
<p>label (if present)</p>
</li><li>
<p>altname (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team_station</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the team_station</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 535</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_player_team_stations'>get_player_team_stations</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?career_station_uri ?years ?team_uri ?clubname ?name ?nickname ?label ?altname
      WHERE {
        {
          ?uri &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
          ?career_station_uri &lt;http://dbpedia.org/ontology/years&gt; ?years .
          ?career_station_uri &lt;http://dbpedia.org/ontology/team&gt; ?team_uri .
          OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/clubname&gt; ?clubname . FILTER(LANG(?clubname) = &#39;en&#39;)}.
          OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/nickname&gt; ?nickname . FILTER(LANG(?nickname) = &#39;en&#39;)}.
          OPTIONAL { ?team_uri &lt;http://xmlns.com/foaf/0.1/name&gt; ?name . FILTER(LANG(?name) = &#39;en&#39;)}.
          OPTIONAL { ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label . FILTER(LANG(?label) = &#39;en&#39;) }.
          OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/fullname&gt; ?altname . FILTER(LANG(?altname) = &#39;en&#39;) }.
        }
        MINUS { ?team_uri &lt;http://dbpedia.org/property/association&gt; ?association . }.
      }
      ORDER BY DESC(?years)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='comment'># do uniq
</span>  <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_career_station_uri'>career_station_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_sol'>sol</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_player_uri-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>get_player_uri</strong>(name, team_uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>guess a player uri by a given name and the uri of the team</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the player</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri player at dbpedia</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 324</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_player_uri'>get_player_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_team_uri'>team_uri</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?player_uri ?team_uri
      WHERE {
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/fullname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/surname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/fullname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/surname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/fullname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        UNION
        { ?player_uri &lt;http://xmlns.com/foaf/0.1/surname&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en . }
        ?player_uri &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://dbpedia.org/ontology/SoccerPlayer&gt; .
        ?player_uri &lt;http://dbpedia.org/property/nationalteam&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_team_uri'>team_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
        OPTIONAL { ?player_uri &lt;http://dbpedia.org/property/nationalcaps&gt; ?caps }.
        OPTIONAL { ?player_uri &lt;http://dbpedia.org/property/nationalgoals&gt; ?goals }.
        ?player_uri &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date .
        FILTER(?birth_date &gt; \&quot;19700101\&quot;^^xsd:date)
      }
      ORDER BY DESC(?caps) DESC(?goals)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>?</span> <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_player_uri'>player_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>:</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_players_for_team-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_players_for_team</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all players of a team given by the uri A player contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>label</p>
</li><li>
<p>team_uri</p>
</li><li>
<p>team</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of the players</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300
301
302
303
304
305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 298</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_players_for_team'>get_players_for_team</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label ?team_uri ?team
        WHERE {
          ?uri &lt;http://purl.org/hpi/soccer-voc/playsFor&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
          ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
          ?uri &lt;http://purl.org/hpi/soccer-voc/playsFor&gt; ?team_uri .
          ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?team .
        }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_stadium-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_stadium</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a stadium given by the uri. A stadium contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li><li>
<p>city_uri</p>
</li><li>
<p>city</p>
</li><li>
<p>population</p>
</li><li>
<p>lat</p>
</li><li>
<p>long</p>
</li><li>
<p>capacity (if present)</p>
</li><li>
<p>seatingCapacity (if present)</p>
</li><li>
<p>image_url (if present)</p>
</li><li>
<p>thumbnail_url (if present)</p>
</li><li>
<p>abstract (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the stadium</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stadium</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 430</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_stadium'>get_stadium</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
  SELECT DISTINCT ?uri ?name ?city_uri ?city ?population ?lat ?long ?capacity ?seatingCapacity ?image_url ?thumbnail_url ?abstract
          WHERE {
            ?uri  &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?name .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?name .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/location&gt; ?city_uri .
            ?city_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?city .
            ?city_uri &lt;http://dbpedia.org/ontology/populationTotal&gt; ?population .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.w3.org/2003/01/geo/wgs84_pos#lat&gt; ?lat .
            &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://www.w3.org/2003/01/geo/wgs84_pos#long&gt; ?long .
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/capacity&gt; ?capacity }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/seatingCapacity&gt; ?seatingCapacity }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url }.
            OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract }.
            FILTER (str(?uri) = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; &amp;&amp; lang(?city) = &#39;en&#39; &amp;&amp; lang(?name) = &#39;en&#39; &amp;&amp; ?population &gt; 5000)
          }
  </span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='op'>!</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_city_uri'>city_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_eql?'>eql?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>http://dbpedia.org/resource/Brazil</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_stadiums-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_stadiums</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all stadiums.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of stadiums</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#get_stadium-instance_method" title="RdfHelper#get_stadium (method)">for content of a stadium</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104
105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_stadiums'>get_stadiums</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT DISTINCT ?uri
              WHERE {
                ?match &lt;http://www.bbc.co.uk/ontologies/sport/Venue&gt; ?uri .
              }</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='id identifier rubyid_get_stadium'>get_stadium</span><span class='lparen'>(</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_team-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_team</strong>(uri, lang_filter = true) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return a team given by a specific uri. A team contains uri,</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the team</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 268</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_team'>get_team</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='id identifier rubyid_lang_filter'>lang_filter</span><span class='op'>=</span><span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_filter'>filter</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FILTER (str(?uri) = &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_filter'>filter</span> <span class='op'>+=</span> <span class='id identifier rubyid_lang_filter'>lang_filter</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;&amp; LANG(?label) = &#39;de&#39;)</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>)</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT ?uri ?label ?name ?image_url ?thumbnail_url ?abstract ?coach ?coach_uri ?wiki_uri
      WHERE {
              ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
              &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/name&gt; ?name FILTER ( LANG(?name) = &#39;de&#39; ) } .
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/isPrimaryTopicOf&gt; ?wiki_uri }.
              OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/coach&gt; ?coach_uri .
                ?coach_uri &lt;http://xmlns.com/foaf/0.1/name&gt; ?coach }.
              </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_filter'>filter</span><span class='embexpr_end'>}</span><span class='tstring_content'>
              }</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>||=</span> <span class='id identifier rubyid_get_team'>get_team</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_lang_filter'>lang_filter</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_solution'>solution</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_team_uri-instance_method">
  
    - (<tt>String</tt>) <strong>get_team_uri</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>guess a team uri by a given team name</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the county</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the national footbll team in dbpedia</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 243</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_team_uri'>get_team_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='comment'>#sparql = &quot;SELECT ?uri WHERE { ?uri &lt;http://dbpedia.org/property/fifaTrigramme&gt; \&quot;#{name}\&quot; . }&quot;
</span>  <span class='comment'>#solution = DBPEDIA.query(sparql).first
</span>  <span class='id identifier rubyid_exceptions'>exceptions</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>USA</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Vereinigte Staaten</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_exceptions'>exceptions</span><span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_exceptions'>exceptions</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>
  SELECT DISTINCT ?country_name
          WHERE {
            ?country_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@de .
            ?country_uri  &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?country_name .
            ?country_uri &lt;http://dbpedia.org/property/commonName&gt; ?common_name .
            FILTER ( LANG(?country_name) = &#39;en&#39; )
          }
  </span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='id identifier rubyid_country_name'>country_name</span> <span class='op'>=</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>?</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_country_name'>country_name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_national_football_team</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http://dbpedia.org/resource/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_country_name'>country_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_teams-instance_method">
  
    - (<tt>Array&lt;RDF::Query::Solution&gt;</tt>) <strong>get_teams</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns all teams. The teams will be ordered by name ascending . Each team
contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>group_uri</p>
</li><li>
<p>name</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of teams</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_teams'>get_teams</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?group_uri ?name
                  WHERE {
                    ?group_uri &lt;http://www.bbc.co.uk/ontologies/sport/hasCompetitor&gt; ?uri .
                    ?uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?name .
                  }
                ORDER BY ASC(?name)
          </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_trainer-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_trainer</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>returns a trainer given by the uri. A trainer contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>name</p>
</li><li>
<p>surname (if present)</p>
</li><li>
<p>givenName (if present)</p>
</li><li>
<p>fullname (if present)</p>
</li><li>
<p>birth_date (if present)</p>
</li><li>
<p>image_url (if present)</p>
</li><li>
<p>thumbnail_url (if present)</p>
</li><li>
<p>abstract (if present)</p>
</li><li>
<p>team_uri (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the stadium</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the stadium</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 467</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_trainer'>get_trainer</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?name ?surname ?givenName ?fullname ?birth_date ?image_url ?thumbnail_url ?abstract ?team_uri
         WHERE {
           ?uri &lt;http://dbpedia.org/property/name&gt; ?name .
           &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/name&gt; ?name .
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/surname&gt; ?surname }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/givenName&gt; ?givenName }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/fullname&gt; ?fullname }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date . }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://xmlns.com/foaf/0.1/depiction&gt; ?image_url . }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/thumbnail&gt; ?thumbnail_url . }.
           OPTIONAL { &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/abstract&gt; ?abstract . FILTER ( LANG(?abstract) = &#39;de&#39; ) }.
           OPTIONAL { ?team_uri &lt;http://dbpedia.org/ontology/coach&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; . }.
         }</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solution'>solution</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_trainer_team_stations-instance_method">
  
    - (<tt>RDF::Query::Solution</tt>) <strong>get_trainer_team_stations</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>return all team stations (only clubs) with time period a trainer
participated in descendant order given by the uri of trainer. A
team_station contains</p>
<ul><li>
<p>uri</p>
</li><li>
<p>career_station_uri</p>
</li><li>
<p>years</p>
</li><li>
<p>team_uri</p>
</li><li>
<p>clubname (if present)</p>
</li><li>
<p>name (if present)</p>
</li><li>
<p>nickname (if present)</p>
</li><li>
<p>label (if present)</p>
</li><li>
<p>altname (if present)</p>
</li></ul>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>uri</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri of the team_station</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>RDF::Query::Solution</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the team_station</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 571</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_trainer_team_stations'>get_trainer_team_stations</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?career_station_uri ?years ?team_uri ?clubname ?name ?nickname ?label ?altname
          WHERE {
            {
              ?uri &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
              &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://dbpedia.org/ontology/careerStation&gt; ?career_station_uri .
              ?career_station_uri &lt;http://dbpedia.org/ontology/years&gt; ?years .
              ?career_station_uri &lt;http://dbpedia.org/ontology/team&gt; ?team_uri .
              OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/clubname&gt; ?clubname . FILTER(LANG(?clubname) = &#39;en&#39;)}.
              OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/nickname&gt; ?nickname . FILTER(LANG(?nickname) = &#39;en&#39;)}.
              OPTIONAL { ?team_uri &lt;http://xmlns.com/foaf/0.1/name&gt; ?name . FILTER(LANG(?name) = &#39;en&#39;)}.
              OPTIONAL { ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label . FILTER(LANG(?label) = &#39;en&#39;) }.
              OPTIONAL { ?team_uri &lt;http://dbpedia.org/property/fullname&gt; ?altname . FILTER(LANG(?altname) = &#39;en&#39;) }.
            }
          }
          ORDER BY DESC(?years)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span>
  <span class='comment'># do uniq
</span>  <span class='const'>Hash</span><span class='lbracket'>[</span><span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sol'>sol</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id identifier rubyid_sol'>sol</span><span class='period'>.</span><span class='id identifier rubyid_career_station_uri'>career_station_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='comma'>,</span> <span class='id identifier rubyid_sol'>sol</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_trainer_uri-instance_method">
  
    - (<tt>String</tt><sup>?</sup>) <strong>get_trainer_uri</strong>(name, team_uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>guess a trainer uri by a given name and uri of the team</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the trainer</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the uri trainer at dbpedia</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 488</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_trainer_uri'>get_trainer_uri</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_team_uri'>team_uri</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reverse'>reverse</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_strip'>strip</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?trainer_uri ?team_uri
      WHERE {
        ?trainer_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en .
        ?trainer_uri &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://dbpedia.org/ontology/SoccerManager&gt; .
        ?trainer_uri &lt;http://dbpedia.org/ontology/coach&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_team_uri'>team_uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; .
        ?trainer_uri &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date .
        FILTER(?birth_date &gt; \&quot;19000101\&quot;^^xsd:date)
      }</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
  <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
             <span class='kw'>when</span> <span class='int'>0</span> <span class='comment'># fallback
</span>               <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?trainer_uri ?team_uri
              WHERE {
                ?trainer_uri &lt;http://xmlns.com/foaf/0.1/name&gt; \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;@en .
                ?trainer_uri &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://dbpedia.org/ontology/SoccerManager&gt; .
                ?trainer_uri &lt;http://dbpedia.org/property/birthDate&gt; ?birth_date .
                FILTER(?birth_date &gt; \&quot;19000101\&quot;^^xsd:date)
              }</span><span class='tstring_end'>&quot;</span></span>
               <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>DBPEDIA</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span> <span class='id identifier rubyid_sparql'>sparql</span>
               <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
             <span class='kw'>when</span> <span class='int'>1</span>
               <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
             <span class='kw'>else</span>
               <span class='id identifier rubyid_solutions'>solutions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
           <span class='kw'>end</span>
  <span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_trainer_uri'>trainer_uri</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tmp_get_player-instance_method">
  
    - (<tt>Object</tt>) <strong>tmp_get_player</strong>(uri) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'></div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/helpers/rdf_helper.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tmp_get_player'>tmp_get_player</span><span class='lparen'>(</span><span class='id identifier rubyid_uri'>uri</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sparql'>sparql</span> <span class='op'>=</span> <span class='const'>SPARQL</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT DISTINCT ?uri ?label ?team_uri ?team
        WHERE {
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?label .
          &lt;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uri'>uri</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; &lt;http://purl.org/hpi/soccer-voc/playsFor&gt; ?team_uri .
          ?team_uri &lt;</span><span class='embexpr_beg'>#{</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>RDFS</span><span class='period'>.</span><span class='id identifier rubyid_label'>label</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt; ?team .
        }</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_solutions'>solutions</span> <span class='op'>=</span> <span class='const'>QUERYABLE</span><span class='period'>.</span><span class='id identifier rubyid_query'>query</span><span class='lparen'>(</span><span class='id identifier rubyid_sparql'>sparql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Aug  4 16:35:42 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.1.2).
</div>

  </body>
</html>